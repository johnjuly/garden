#计算机体系结构
不同计算机/计算机内部/ 通信在复杂系统常见；

## 广义的总线=通信系统。
或者 通信协议？
- tcp/ip,以太网，网线，rtl信号，系统调用异常处理时，操作系统与用户程序之间通信。
## 狭义的总线-硬件模块间的通信协议

### 最简单的总线
单周期处理器：idu- inst-> idu
主动发起通信的模块叫主设备master,响应通信的模块叫slave从设备。

### 更真实的处理器
ifu并非每周期都能取到指令，idu需要等待ifu完成取值后才能进行译码。添加valid信号识别无效信号。
- 如何避免处理器执行了无效指令？
- 处理器是个**状态机**，valid无效时，只需要不修改处理器的状态即可
	- 状态=时序逻辑元件，使其写使能无效即可

反过来 ifu需要等待idu完成当前译码工作后才能发送下一条指令，idu并非每周器都能译码指令。ready信号。

异步总线：双方不知道对方的情况
- 通信发生的时刻无法预知，ifu何时取到指令。idu何时空闲，在valid&ready时 同时有效。才发生，称握手
- 特殊情况：valid&!ready master暂存消息。![[Pasted image 20251119214357.png]]
### 异步总线的RTL实现-接口信号
消息：inst


### 异步总线的RTL实现-模块逻辑
> 通信协议，规定的实现。

master和slave需要根据握手信号的情况来实现约定的总线协议，
- 不同的情况做不同的事情->状态机
- 总线RTL实现=接口信号+状态机
![[Pasted image 20251119215130.png]]
master两个状态![[Pasted image 20251119215015.png]]

### 总线视角下的处理器设计
四种 ，总线模型下的描述。


